{
  "version": 3,
  "sources": ["../bundle-9DplLb/checked-fetch.js", "../../../src/index.js", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-9DplLb/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-9DplLb/middleware-loader.entry.ts"],
  "sourceRoot": "D:\\sunscape\\Be-Frontend\\Wild-Breeze\\workers\\.wrangler\\tmp\\dev-OTHI5c",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "/**\r\n * Wild-Breeze Cloudflare Workers API\r\n * Production-Grade Security Implementation\r\n */\r\n\r\n// ==================== SECURITY HELPERS ====================\r\n\r\n// Simple UUID generator for IDs\r\nfunction generateId() {\r\n    return crypto.randomUUID();\r\n}\r\n\r\n// Rate limiting store (in-memory, resets on worker restart)\r\nconst rateLimitStore = new Map();\r\n\r\n// Rate limiter for login attempts\r\nfunction checkRateLimit(ip, maxAttempts = 5, windowMs = 15 * 60 * 1000) {\r\n    const now = Date.now();\r\n    const key = `login:${ip}`;\r\n    const record = rateLimitStore.get(key);\r\n\r\n    if (!record) {\r\n        rateLimitStore.set(key, { attempts: 1, firstAttempt: now });\r\n        return { allowed: true, remaining: maxAttempts - 1 };\r\n    }\r\n\r\n    // Reset if window has passed\r\n    if (now - record.firstAttempt > windowMs) {\r\n        rateLimitStore.set(key, { attempts: 1, firstAttempt: now });\r\n        return { allowed: true, remaining: maxAttempts - 1 };\r\n    }\r\n\r\n    // Check if exceeded\r\n    if (record.attempts >= maxAttempts) {\r\n        const retryAfter = Math.ceil((record.firstAttempt + windowMs - now) / 1000);\r\n        return { allowed: false, remaining: 0, retryAfter };\r\n    }\r\n\r\n    record.attempts++;\r\n    return { allowed: true, remaining: maxAttempts - record.attempts };\r\n}\r\n\r\n// Reset rate limit on successful login\r\nfunction resetRateLimit(ip) {\r\n    rateLimitStore.delete(`login:${ip}`);\r\n}\r\n\r\n// ==================== CORS & SECURITY HEADERS ====================\r\n\r\n// Allowed origins for CORS\r\nconst ALLOWED_ORIGINS = [\r\n    'https://wild-breeze.pages.dev',\r\n    'http://localhost:5173',\r\n    'http://localhost:3000',\r\n    'http://127.0.0.1:5173',\r\n    'http://127.0.0.1:3000'\r\n];\r\n\r\nfunction isAllowedOrigin(origin, env) {\r\n    if (!origin) return false;\r\n\r\n    // Check configured origin from env\r\n    const configuredOrigin = env.CORS_ORIGIN;\r\n    if (configuredOrigin === '*') return true;\r\n    if (configuredOrigin && origin === configuredOrigin) return true;\r\n\r\n    // Check against allowed list\r\n    if (ALLOWED_ORIGINS.includes(origin)) return true;\r\n\r\n    // Allow all Vercel preview/production domains\r\n    if (origin.endsWith('.vercel.app')) return true;\r\n\r\n    return false;\r\n}\r\n\r\nfunction corsHeaders(env, requestOrigin = null) {\r\n    // Check if request origin is allowed\r\n    if (requestOrigin && isAllowedOrigin(requestOrigin, env)) {\r\n        return {\r\n            'Access-Control-Allow-Origin': requestOrigin,\r\n            'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n            'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n            'Access-Control-Max-Age': '86400',\r\n        };\r\n    }\r\n\r\n    // Default to configured origin\r\n    const defaultOrigin = env.CORS_ORIGIN || 'https://wild-breeze.pages.dev';\r\n    return {\r\n        'Access-Control-Allow-Origin': defaultOrigin,\r\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n        'Access-Control-Max-Age': '86400',\r\n    };\r\n}\r\n\r\nfunction securityHeaders() {\r\n    return {\r\n        'X-Content-Type-Options': 'nosniff',\r\n        'X-Frame-Options': 'DENY',\r\n        'X-XSS-Protection': '1; mode=block',\r\n        'Referrer-Policy': 'strict-origin-when-cross-origin',\r\n        'Content-Security-Policy': \"default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https: data:; connect-src 'self' https://api.printful.com;\",\r\n        'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',\r\n    };\r\n}\r\n\r\n// JSON response helper with security headers\r\nfunction jsonResponse(data, status = 200, env = {}, requestOrigin = null) {\r\n    return new Response(JSON.stringify(data), {\r\n        status,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            ...corsHeaders(env, requestOrigin),\r\n            ...securityHeaders()\r\n        }\r\n    });\r\n}\r\n\r\n// Error response helper - doesn't expose internal details\r\nfunction errorResponse(message, status = 400, env = {}, requestOrigin = null) {\r\n    return jsonResponse({ error: message }, status, env, requestOrigin);\r\n}\r\n\r\n// ==================== INPUT VALIDATION ====================\r\n\r\nfunction validateEmail(email) {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n}\r\n\r\nfunction validatePassword(password) {\r\n    // Minimum 8 characters, at least one letter and one number\r\n    if (password.length < 8) {\r\n        return { valid: false, message: 'Password must be at least 8 characters long' };\r\n    }\r\n    if (!/[a-zA-Z]/.test(password)) {\r\n        return { valid: false, message: 'Password must contain at least one letter' };\r\n    }\r\n    if (!/[0-9]/.test(password)) {\r\n        return { valid: false, message: 'Password must contain at least one number' };\r\n    }\r\n    return { valid: true };\r\n}\r\n\r\nfunction sanitizeString(str, maxLength = 1000) {\r\n    if (typeof str !== 'string') return '';\r\n    // Remove potentially dangerous characters and limit length\r\n    return str.slice(0, maxLength).replace(/[<>]/g, '');\r\n}\r\n\r\nfunction truncateString(str, num) {\r\n    if (!str) return '';\r\n    if (str.length <= num) {\r\n        return str;\r\n    }\r\n    return str.slice(0, num) + '...';\r\n}\r\n\r\n// ==================== SECURE PASSWORD HASHING (PBKDF2) ====================\r\n\r\nasync function hashPassword(password) {\r\n    const encoder = new TextEncoder();\r\n\r\n    // Generate a random salt\r\n    const salt = crypto.getRandomValues(new Uint8Array(16));\r\n\r\n    // Import password as key material\r\n    const keyMaterial = await crypto.subtle.importKey(\r\n        'raw',\r\n        encoder.encode(password),\r\n        'PBKDF2',\r\n        false,\r\n        ['deriveBits']\r\n    );\r\n\r\n    // Derive key using PBKDF2 with 100,000 iterations\r\n    const derivedBits = await crypto.subtle.deriveBits(\r\n        {\r\n            name: 'PBKDF2',\r\n            salt: salt,\r\n            iterations: 100000,\r\n            hash: 'SHA-256'\r\n        },\r\n        keyMaterial,\r\n        256\r\n    );\r\n\r\n    // Combine salt and hash for storage\r\n    const hashArray = new Uint8Array(derivedBits);\r\n    const combined = new Uint8Array(salt.length + hashArray.length);\r\n    combined.set(salt);\r\n    combined.set(hashArray, salt.length);\r\n\r\n    return btoa(String.fromCharCode(...combined));\r\n}\r\n\r\nasync function verifyPassword(password, storedHash) {\r\n    try {\r\n        const encoder = new TextEncoder();\r\n\r\n        // Decode the stored hash\r\n        const combined = Uint8Array.from(atob(storedHash), c => c.charCodeAt(0));\r\n\r\n        // Extract salt (first 16 bytes) and hash (remaining bytes)\r\n        const salt = combined.slice(0, 16);\r\n        const storedHashBytes = combined.slice(16);\r\n\r\n        // Import password as key material\r\n        const keyMaterial = await crypto.subtle.importKey(\r\n            'raw',\r\n            encoder.encode(password),\r\n            'PBKDF2',\r\n            false,\r\n            ['deriveBits']\r\n        );\r\n\r\n        // Derive key using same parameters\r\n        const derivedBits = await crypto.subtle.deriveBits(\r\n            {\r\n                name: 'PBKDF2',\r\n                salt: salt,\r\n                iterations: 100000,\r\n                hash: 'SHA-256'\r\n            },\r\n            keyMaterial,\r\n            256\r\n        );\r\n\r\n        const newHashBytes = new Uint8Array(derivedBits);\r\n\r\n        // Constant-time comparison to prevent timing attacks\r\n        if (newHashBytes.length !== storedHashBytes.length) return false;\r\n        let result = 0;\r\n        for (let i = 0; i < newHashBytes.length; i++) {\r\n            result |= newHashBytes[i] ^ storedHashBytes[i];\r\n        }\r\n        return result === 0;\r\n    } catch {\r\n        return false;\r\n    }\r\n}\r\n\r\n// ==================== JWT IMPLEMENTATION ====================\r\n\r\nasync function createJWT(payload, secret) {\r\n    const header = { alg: 'HS256', typ: 'JWT' };\r\n\r\n    const encoder = new TextEncoder();\r\n    const headerB64 = btoa(JSON.stringify(header)).replace(/=/g, '');\r\n    const payloadB64 = btoa(JSON.stringify({\r\n        ...payload,\r\n        iat: Math.floor(Date.now() / 1000),\r\n        exp: Math.floor(Date.now() / 1000) + (7 * 24 * 60 * 60) // 7 days\r\n    })).replace(/=/g, '');\r\n\r\n    const signatureInput = `${headerB64}.${payloadB64}`;\r\n    const key = await crypto.subtle.importKey(\r\n        'raw',\r\n        encoder.encode(secret),\r\n        { name: 'HMAC', hash: 'SHA-256' },\r\n        false,\r\n        ['sign']\r\n    );\r\n\r\n    const signature = await crypto.subtle.sign('HMAC', key, encoder.encode(signatureInput));\r\n    const signatureB64 = btoa(String.fromCharCode(...new Uint8Array(signature))).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\r\n\r\n    return `${headerB64}.${payloadB64}.${signatureB64}`;\r\n}\r\n\r\nasync function verifyJWT(token, secret) {\r\n    try {\r\n        const [headerB64, payloadB64, signatureB64] = token.split('.');\r\n        const encoder = new TextEncoder();\r\n\r\n        const signatureInput = `${headerB64}.${payloadB64}`;\r\n        const key = await crypto.subtle.importKey(\r\n            'raw',\r\n            encoder.encode(secret),\r\n            { name: 'HMAC', hash: 'SHA-256' },\r\n            false,\r\n            ['verify']\r\n        );\r\n\r\n        const signature = Uint8Array.from(atob(signatureB64.replace(/-/g, '+').replace(/_/g, '/')), c => c.charCodeAt(0));\r\n        const valid = await crypto.subtle.verify('HMAC', key, signature, encoder.encode(signatureInput));\r\n\r\n        if (!valid) return null;\r\n\r\n        const payload = JSON.parse(atob(payloadB64));\r\n        if (payload.exp && payload.exp < Math.floor(Date.now() / 1000)) {\r\n            return null; // Token expired\r\n        }\r\n\r\n        return payload;\r\n    } catch {\r\n        return null;\r\n    }\r\n}\r\n\r\n// ==================== AUTH MIDDLEWARE ====================\r\n\r\nasync function authenticateRequest(request, env) {\r\n    const authHeader = request.headers.get('Authorization');\r\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n        return null;\r\n    }\r\n\r\n    const jwtSecret = env.JWT_SECRET;\r\n    if (!jwtSecret) {\r\n        console.error('JWT_SECRET not configured');\r\n        return null;\r\n    }\r\n\r\n    const token = authHeader.substring(7);\r\n    return await verifyJWT(token, jwtSecret);\r\n}\r\n\r\n// Get client IP for rate limiting\r\nfunction getClientIP(request) {\r\n    return request.headers.get('CF-Connecting-IP') ||\r\n        request.headers.get('X-Forwarded-For')?.split(',')[0] ||\r\n        'unknown';\r\n}\r\n\r\n// ==================== ROUTER ====================\r\n\r\nclass Router {\r\n    constructor() {\r\n        this.routes = [];\r\n    }\r\n\r\n    add(method, path, handler) {\r\n        this.routes.push({ method, path, handler });\r\n    }\r\n\r\n    get(path, handler) { this.add('GET', path, handler); }\r\n    post(path, handler) { this.add('POST', path, handler); }\r\n    put(path, handler) { this.add('PUT', path, handler); }\r\n    delete(path, handler) { this.add('DELETE', path, handler); }\r\n\r\n    async handle(request, env, ctx) {\r\n        const url = new URL(request.url);\r\n        const method = request.method;\r\n        const path = url.pathname;\r\n        const requestOrigin = request.headers.get('Origin');\r\n\r\n        // Handle CORS preflight\r\n        if (method === 'OPTIONS') {\r\n            return new Response(null, {\r\n                status: 204,\r\n                headers: {\r\n                    ...corsHeaders(env, requestOrigin),\r\n                    ...securityHeaders()\r\n                }\r\n            });\r\n        }\r\n\r\n        for (const route of this.routes) {\r\n            if (route.method === method) {\r\n                const match = this.matchPath(route.path, path);\r\n                if (match) {\r\n                    try {\r\n                        return await route.handler(request, env, ctx, match.params, url.searchParams);\r\n                    } catch (error) {\r\n                        console.error('Route error:', error);\r\n                        return errorResponse('An error occurred', 500, env, requestOrigin);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return errorResponse('Not found', 404, env, requestOrigin);\r\n    }\r\n\r\n    matchPath(pattern, path) {\r\n        const patternParts = pattern.split('/');\r\n        const pathParts = path.split('/');\r\n\r\n        if (patternParts.length !== pathParts.length) return null;\r\n\r\n        const params = {};\r\n        for (let i = 0; i < patternParts.length; i++) {\r\n            if (patternParts[i].startsWith(':')) {\r\n                params[patternParts[i].substring(1)] = pathParts[i];\r\n            } else if (patternParts[i] !== pathParts[i]) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return { params };\r\n    }\r\n}\r\n\r\n// Create router and define routes\r\nconst router = new Router();\r\n\r\n// ==================== AUTH ROUTES ====================\r\n\r\nrouter.post('/api/auth/register', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n\r\n    let body;\r\n    try {\r\n        body = await request.json();\r\n    } catch {\r\n        return errorResponse('Invalid request body', 400, env, requestOrigin);\r\n    }\r\n\r\n    const { email, password, firstName, lastName } = body;\r\n\r\n    // Validate email\r\n    if (!email || !validateEmail(email)) {\r\n        return errorResponse('Valid email is required', 400, env, requestOrigin);\r\n    }\r\n\r\n    // Validate password\r\n    if (!password) {\r\n        return errorResponse('Password is required', 400, env, requestOrigin);\r\n    }\r\n\r\n    const passwordValidation = validatePassword(password);\r\n    if (!passwordValidation.valid) {\r\n        return errorResponse(passwordValidation.message, 400, env, requestOrigin);\r\n    }\r\n\r\n    // Check if user exists\r\n    const existing = await env.DB.prepare('SELECT id FROM users WHERE email = ?').bind(email.toLowerCase()).first();\r\n    if (existing) {\r\n        return errorResponse('Email already registered', 400, env, requestOrigin);\r\n    }\r\n\r\n    const id = generateId();\r\n    const passwordHash = await hashPassword(password);\r\n\r\n    await env.DB.prepare(\r\n        'INSERT INTO users (id, email, password_hash, first_name, last_name) VALUES (?, ?, ?, ?, ?)'\r\n    ).bind(id, email.toLowerCase(), passwordHash, sanitizeString(firstName || ''), sanitizeString(lastName || '')).run();\r\n\r\n    return jsonResponse({ id, email: email.toLowerCase() }, 201, env, requestOrigin);\r\n});\r\n\r\nrouter.post('/api/auth/login', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const clientIP = getClientIP(request);\r\n\r\n    // Check rate limit\r\n    const rateLimit = checkRateLimit(clientIP);\r\n    if (!rateLimit.allowed) {\r\n        return jsonResponse(\r\n            { error: 'Too many login attempts. Please try again later.' },\r\n            429,\r\n            env,\r\n            requestOrigin\r\n        );\r\n    }\r\n\r\n    let body;\r\n    try {\r\n        body = await request.json();\r\n    } catch {\r\n        return errorResponse('Invalid request body', 400, env, requestOrigin);\r\n    }\r\n\r\n    const { email, password } = body;\r\n\r\n    if (!email || !password) {\r\n        return errorResponse('Email and password are required', 400, env, requestOrigin);\r\n    }\r\n\r\n    const user = await env.DB.prepare('SELECT * FROM users WHERE email = ?').bind(email.toLowerCase()).first();\r\n    if (!user) {\r\n        return errorResponse('Invalid credentials', 401, env, requestOrigin);\r\n    }\r\n\r\n    const valid = await verifyPassword(password, user.password_hash);\r\n    if (!valid) {\r\n        return errorResponse('Invalid credentials', 401, env, requestOrigin);\r\n    }\r\n\r\n    // Check for JWT secret - FAIL if not configured\r\n    const jwtSecret = env.JWT_SECRET;\r\n    if (!jwtSecret) {\r\n        console.error('CRITICAL: JWT_SECRET not configured');\r\n        return errorResponse('Authentication service unavailable', 503, env, requestOrigin);\r\n    }\r\n\r\n    // Reset rate limit on successful login\r\n    resetRateLimit(clientIP);\r\n\r\n    const token = await createJWT({ userId: user.id, email: user.email }, jwtSecret);\r\n\r\n    return jsonResponse({\r\n        token,\r\n        user: {\r\n            id: user.id,\r\n            email: user.email,\r\n            firstName: user.first_name,\r\n            lastName: user.last_name\r\n        }\r\n    }, 200, env, requestOrigin);\r\n});\r\n\r\n// ==================== PRODUCTS ROUTES ====================\r\n\r\nrouter.get('/api/products', async (request, env, ctx, params, query) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n\r\n    let products = await env.DB.prepare('SELECT * FROM products ORDER BY created_at DESC').all();\r\n    let results = products.results || [];\r\n\r\n    // Apply filters\r\n    const availability = query.get('availability');\r\n    if (availability === 'in_stock') {\r\n        results = results.filter(p => p.is_available === 1);\r\n    } else if (availability === 'out_of_stock') {\r\n        results = results.filter(p => p.is_available === 0);\r\n    }\r\n\r\n    const category = query.get('category');\r\n    if (category) {\r\n        results = results.filter(p => p.category === category);\r\n    }\r\n\r\n    const minPrice = query.get('min_price');\r\n    if (minPrice) {\r\n        results = results.filter(p => parseFloat(p.price) >= parseFloat(minPrice));\r\n    }\r\n\r\n    const maxPrice = query.get('max_price');\r\n    if (maxPrice) {\r\n        results = results.filter(p => parseFloat(p.price) <= parseFloat(maxPrice));\r\n    }\r\n\r\n    // Apply sorting\r\n    const sort = query.get('sort');\r\n    if (sort === 'price_asc') {\r\n        results.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));\r\n    } else if (sort === 'price_desc') {\r\n        results.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));\r\n    } else if (sort === 'alphabetical_az') {\r\n        results.sort((a, b) => a.title.localeCompare(b.title));\r\n    } else if (sort === 'alphabetical_za') {\r\n        results.sort((a, b) => b.title.localeCompare(a.title));\r\n    }\r\n\r\n    // Transform for frontend compatibility\r\n    results = results.map(p => ({\r\n        ...p,\r\n        is_available: p.is_available === 1,\r\n        is_sale: p.is_sale === 1\r\n    }));\r\n\r\n    return jsonResponse(results, 200, env, requestOrigin);\r\n});\r\n\r\n// ==================== HERO SLIDES ROUTES ====================\r\n\r\nrouter.get('/api/hero-slides', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n\r\n    const slides = await env.DB.prepare(\r\n        'SELECT * FROM hero_slides WHERE is_active = 1 ORDER BY sort_order ASC'\r\n    ).all();\r\n\r\n    const results = (slides.results || []).map(s => ({\r\n        ...s,\r\n        is_active: s.is_active === 1\r\n    }));\r\n\r\n    return jsonResponse(results, 200, env, requestOrigin);\r\n});\r\n\r\n// ==================== FAQs ROUTES ====================\r\n\r\nrouter.get('/api/faqs', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const faqs = await env.DB.prepare('SELECT * FROM faqs ORDER BY sort_order ASC').all();\r\n    return jsonResponse(faqs.results || [], 200, env, requestOrigin);\r\n});\r\n\r\n// ==================== CONTACT ROUTES ====================\r\n\r\nrouter.post('/api/contact', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n\r\n    let body;\r\n    try {\r\n        body = await request.json();\r\n    } catch {\r\n        return errorResponse('Invalid request body', 400, env, requestOrigin);\r\n    }\r\n\r\n    const { name, email, message } = body;\r\n\r\n    // Validate inputs\r\n    if (!message || message.trim().length === 0) {\r\n        return errorResponse('Message is required', 400, env, requestOrigin);\r\n    }\r\n\r\n    if (email && !validateEmail(email)) {\r\n        return errorResponse('Invalid email format', 400, env, requestOrigin);\r\n    }\r\n\r\n    const id = generateId();\r\n    await env.DB.prepare(\r\n        'INSERT INTO contact_messages (id, name, email, message) VALUES (?, ?, ?, ?)'\r\n    ).bind(id, sanitizeString(name || ''), email || '', sanitizeString(message)).run();\r\n\r\n    return jsonResponse({ success: true, message: 'Message received' }, 201, env, requestOrigin);\r\n});\r\n\r\n// ==================== CART ROUTES ====================\r\n\r\nrouter.get('/api/cart', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const user = await authenticateRequest(request, env);\r\n    if (!user) {\r\n        return errorResponse('Unauthorized', 401, env, requestOrigin);\r\n    }\r\n\r\n    const cartItems = await env.DB.prepare(`\r\n        SELECT id, quantity, product_id, title, price, image_url, selected_size, selected_color, created_at\r\n        FROM cart_items\r\n        WHERE user_id = ?\r\n        ORDER BY created_at DESC\r\n    `).bind(user.userId).all();\r\n\r\n    return jsonResponse(cartItems.results || [], 200, env, requestOrigin);\r\n});\r\n\r\nrouter.post('/api/cart', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const user = await authenticateRequest(request, env);\r\n    if (!user) {\r\n        return errorResponse('Unauthorized', 401, env, requestOrigin);\r\n    }\r\n\r\n    let body;\r\n    try {\r\n        body = await request.json();\r\n    } catch {\r\n        return errorResponse('Invalid request body', 400, env, requestOrigin);\r\n    }\r\n\r\n    const { productId, quantity = 1, title, price, imageUrl, selectedSize, selectedColor } = body;\r\n    console.log(\"Add to cart:\", body);\r\n\r\n    if (!productId) {\r\n        return errorResponse('Product ID is required', 400, env, requestOrigin);\r\n    }\r\n\r\n    // Check if item exists in cart (matching product ID, size, and color)\r\n    const existing = await env.DB.prepare(\r\n        'SELECT id, quantity FROM cart_items WHERE user_id = ? AND product_id = ? AND (selected_size = ? OR selected_size IS NULL) AND (selected_color = ? OR selected_color IS NULL)'\r\n    ).bind(user.userId, productId.toString(), selectedSize || null, selectedColor || null).first();\r\n\r\n    if (existing) {\r\n        // Update quantity\r\n        await env.DB.prepare(\r\n            'UPDATE cart_items SET quantity = quantity + ? WHERE id = ?'\r\n        ).bind(quantity, existing.id).run();\r\n        return jsonResponse({ id: existing.id, quantity: existing.quantity + quantity }, 200, env, requestOrigin);\r\n    } else {\r\n        // Add new item with details\r\n        const id = generateId();\r\n        await env.DB.prepare(\r\n            'INSERT INTO cart_items (id, user_id, product_id, quantity, title, price, image_url, selected_size, selected_color) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)'\r\n        ).bind(\r\n            id,\r\n            user.userId,\r\n            productId.toString(),\r\n            quantity,\r\n            truncateString(title, 255),\r\n            price || 0,\r\n            imageUrl || '',\r\n            selectedSize || null,\r\n            selectedColor || null\r\n        ).run();\r\n        return jsonResponse({ id, productId, quantity, title, price, imageUrl, selectedSize, selectedColor }, 201, env, requestOrigin);\r\n    }\r\n});\r\n\r\nrouter.delete('/api/cart/:productId', async (request, env, ctx, params) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const user = await authenticateRequest(request, env);\r\n    if (!user) {\r\n        return errorResponse('Unauthorized', 401, env, requestOrigin);\r\n    }\r\n\r\n    await env.DB.prepare(\r\n        'DELETE FROM cart_items WHERE user_id = ? AND product_id = ?'\r\n    ).bind(user.userId, params.productId).run();\r\n\r\n    return jsonResponse({ message: 'Item removed' }, 200, env, requestOrigin);\r\n});\r\n\r\nrouter.post('/api/cart/merge', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const user = await authenticateRequest(request, env);\r\n    if (!user) {\r\n        return errorResponse('Unauthorized', 401, env, requestOrigin);\r\n    }\r\n\r\n    let body;\r\n    try {\r\n        body = await request.json();\r\n    } catch {\r\n        return errorResponse('Invalid request body', 400, env, requestOrigin);\r\n    }\r\n\r\n    const { guestCart } = body;\r\n\r\n    if (Array.isArray(guestCart)) {\r\n        for (const item of guestCart) {\r\n            if (!item.product_id) continue;\r\n\r\n            const existing = await env.DB.prepare(\r\n                'SELECT id, quantity FROM cart_items WHERE user_id = ? AND product_id = ?'\r\n            ).bind(user.userId, item.product_id.toString()).first();\r\n\r\n            if (existing) {\r\n                await env.DB.prepare(\r\n                    'UPDATE cart_items SET quantity = quantity + ? WHERE id = ?'\r\n                ).bind(item.quantity || 1, existing.id).run();\r\n            } else {\r\n                const id = generateId();\r\n                await env.DB.prepare(\r\n                    'INSERT INTO cart_items (id, user_id, product_id, quantity, title, price, image_url, selected_size, selected_color) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)'\r\n                ).bind(\r\n                    id,\r\n                    user.userId,\r\n                    item.product_id.toString(),\r\n                    item.quantity || 1,\r\n                    truncateString(item.title, 255),\r\n                    item.price || 0,\r\n                    item.image_url || '',\r\n                    item.selectedSize || null,\r\n                    item.selectedColor || null\r\n                ).run();\r\n            }\r\n        }\r\n    }\r\n\r\n    // Return updated cart\r\n    const cartItems = await env.DB.prepare(`\r\n        SELECT id, quantity, product_id, title, price, image_url, selected_size, selected_color, created_at\r\n        FROM cart_items\r\n        WHERE user_id = ?\r\n        ORDER BY created_at DESC\r\n    `).bind(user.userId).all();\r\n\r\n    return jsonResponse(cartItems.results || [], 200, env, requestOrigin);\r\n});\r\n\r\n// ==================== SUBSCRIBE ROUTES ====================\r\n\r\nrouter.post('/api/subscribe', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n\r\n    let body;\r\n    try {\r\n        body = await request.json();\r\n    } catch {\r\n        return errorResponse('Invalid request body', 400, env, requestOrigin);\r\n    }\r\n\r\n    const { phoneNumber } = body;\r\n\r\n    if (!phoneNumber || phoneNumber.trim().length === 0) {\r\n        return errorResponse('Phone number is required', 400, env, requestOrigin);\r\n    }\r\n\r\n    // Basic phone number validation (digits, spaces, dashes, plus allowed)\r\n    const cleanPhone = phoneNumber.replace(/[\\s\\-\\(\\)]/g, '');\r\n    if (!/^\\+?\\d{10,15}$/.test(cleanPhone)) {\r\n        return errorResponse('Invalid phone number format', 400, env, requestOrigin);\r\n    }\r\n\r\n    // Check if already exists\r\n    const existing = await env.DB.prepare(\r\n        'SELECT id FROM discount_signups WHERE phone_number = ?'\r\n    ).bind(cleanPhone).first();\r\n\r\n    if (!existing) {\r\n        const id = generateId();\r\n        await env.DB.prepare(\r\n            'INSERT INTO discount_signups (id, phone_number) VALUES (?, ?)'\r\n        ).bind(id, cleanPhone).run();\r\n    }\r\n\r\n    return jsonResponse({ message: 'Discount activated!', discountActive: true }, 200, env, requestOrigin);\r\n});\r\n\r\n// ==================== PRINTFUL PROXY ROUTES ====================\r\n\r\nrouter.get('/api/printful/products', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    const printfulToken = env.PRINTFUL_API_TOKEN;\r\n\r\n    if (!printfulToken) {\r\n        return errorResponse('Printful API not configured', 500, env, requestOrigin);\r\n    }\r\n\r\n    try {\r\n        // Fetch all store products\r\n        const productsResponse = await fetch('https://api.printful.com/store/products', {\r\n            headers: {\r\n                'Authorization': `Bearer ${printfulToken}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n\r\n        const productsData = await productsResponse.json();\r\n        const storeProducts = productsData.result || [];\r\n\r\n        // Fetch detailed info for each product\r\n        const productsWithDetails = await Promise.all(\r\n            storeProducts.map(async (product) => {\r\n                try {\r\n                    const detailsResponse = await fetch(`https://api.printful.com/store/products/${product.id}`, {\r\n                        headers: {\r\n                            'Authorization': `Bearer ${printfulToken}`,\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    });\r\n                    const detailsData = await detailsResponse.json();\r\n                    const details = detailsData.result;\r\n\r\n                    if (!details) return null;\r\n\r\n                    const variants = details.sync_variants || [];\r\n                    const firstVariant = variants[0];\r\n                    const price = firstVariant?.retail_price || '0.00';\r\n\r\n                    return {\r\n                        id: product.id.toString(),\r\n                        title: product.name,\r\n                        image_url: product.thumbnail_url,\r\n                        price: parseFloat(price).toFixed(2),\r\n                        is_available: true,\r\n                        is_sale: false,\r\n                        original_price: null,\r\n                        printful_id: product.id,\r\n                        external_id: product.external_id,\r\n                        variants: variants.map(v => ({\r\n                            id: v.id,\r\n                            name: v.name,\r\n                            price: v.retail_price,\r\n                            sku: v.sku\r\n                        }))\r\n                    };\r\n                } catch {\r\n                    return null;\r\n                }\r\n            })\r\n        );\r\n\r\n        const products = productsWithDetails.filter(p => p !== null);\r\n        return jsonResponse({ products }, 200, env, requestOrigin);\r\n    } catch (error) {\r\n        console.error('Printful API error:', error);\r\n        return errorResponse('Failed to fetch products', 500, env, requestOrigin);\r\n    }\r\n});\r\n\r\n// Health check\r\nrouter.get('/api/health', async (request, env) => {\r\n    const requestOrigin = request.headers.get('Origin');\r\n    return jsonResponse({\r\n        status: 'ok',\r\n        timestamp: new Date().toISOString(),\r\n        version: '2.0.0'\r\n    }, 200, env, requestOrigin);\r\n});\r\n\r\n// Main export\r\nexport default {\r\n    async fetch(request, env, ctx) {\r\n        return router.handle(request, env, ctx);\r\n    }\r\n};\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\src\\\\index.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\src\\\\index.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\.wrangler\\\\tmp\\\\bundle-9DplLb\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\.wrangler\\\\tmp\\\\bundle-9DplLb\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"D:\\\\sunscape\\\\Be-Frontend\\\\Wild-Breeze\\\\workers\\\\.wrangler\\\\tmp\\\\bundle-9DplLb\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
